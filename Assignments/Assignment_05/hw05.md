---
title: "hw05"
author: "Trevor Baker"
date: "15/10/2019"
output: 
  html_document:
    keep_md: true
---


```r
knitr::opts_chunk$set(echo = TRUE)

library(tidyverse)
library(gapminder)
```

## Exercise 1: The value of the here::here package

Setting working directories is not as straightforward as it seems. If someone else wants to run code that has its working directory defined with `setwd()`, then they will need to have the same folder structure as the originating computer. Likewise if you get a new computer, or move your work to another folder. There are additional compatibility problems when switching between operating systems as some use `\\` to separate folders in file paths, and others use `/`. There are additional inconsistencies between how `.R` files and `.Rmd` files deal with working directories.

It is a big hassle to have to overwrite working directories manually within scripts, especially if `setwd()` is called numerous times.

The `here` package provides a solution to these issues by providing a platform-agnostic way to set working directories. With `here`, working directories are set relative to a particular user's file structure and operating system. The working directory when using `here` is defined based on a simple set of rules, such as where a `.here` file was made using the function `here::set_here()`, or where an `.Rproj` file exists in the current folder structure. By opening your project via an `.Rproj` file and using `here::here` within that script, any computer that accesses the script via the `.Rproj` file will be able to seamlessly access and write files within that script using the folder structure and operating system that exists locally. 

_`here` makes work easily transferable, and readily reproducible, which should be a goal in all your work in R._


## Exercise 2: Factor management

__Task:__ Choose one dataset (of your choice) and a variable to explore. After ensuring the variable(s) youâ€™re exploring are indeed factors, you should:

    Drop factor / levels;
    Reorder levels based on knowledge from data.

Explore the effects of re-leveling a factor in a tibble by:

    comparing the results of arrange on the original and re-leveled factor.
    Plotting a figure of before/after re-leveling the factor (make sure to assign the factor to an aesthetic of your choosing).

#### Gapminder option

_Drop Oceania._ Filter the Gapminder data to remove observations associated with the continent of Oceania. Additionally, remove unused factor levels. Provide concrete information on the data before and after removing these rows and Oceania; address the number of rows and the levels of the affected factors.

The code chunk below ensures that the `gapminder$continent` column is indeed a factor, and checks the factor levels:

```r
#ensure that the column is a factor
gapminder$continent %>% class()
```

```
## [1] "factor"
```

```r
#look at levels of gapminder$continent
gapminder$continent %>% levels()
```

```
## [1] "Africa"   "Americas" "Asia"     "Europe"   "Oceania"
```

The code chunk below provides a look at factor levels in `gapminder`before Oceania is dropped from the continent column. There are actually two factor columns in `gapminder`: continent and country. If we were dropping Oceania from the dataset for further analysis, it would be important to also remove Oceania-associated factor levels from the country column, as they will have no associated obervations (i.e. rows) remaining, so these will be dealt with as well in the following steps. 

```r
#look at unique levels of gapminder$continent before removing Oceania:
gapminder$continent %>% levels()
```

```
## [1] "Africa"   "Americas" "Asia"     "Europe"   "Oceania"
```

```r
#we have 5 levels in the continent column beforehand:
gapminder$continent %>% nlevels()
```

```
## [1] 5
```

```r
#there also Oceania-associated factor levels (i.e. countries) in gapminder$country:
gapminder %>%
  group_by(continent) %>%
  summarize(n_country = unique(country) %>% length())
```

```
## # A tibble: 5 x 2
##   continent n_country
##   <fct>         <int>
## 1 Africa           52
## 2 Americas         25
## 3 Asia             33
## 4 Europe           30
## 5 Oceania           2
```

```r
#these two countries in Oceania are Australia and New Zealand:
gapminder %>%
  filter(continent=="Oceania") %>%
  select(country) %>%
  unique()
```

```
## # A tibble: 2 x 1
##   country    
##   <fct>      
## 1 Australia  
## 2 New Zealand
```

This chunk of code removes the Oceania rows from the dataset using the `filter()` function, and then drops all unused levels from all factor columns (i.e. country and continent) using the `droplevels()` function:

```r
#this is the step to drop Oceania and associated factor levels from the dataset
gapminder_drop <- gapminder %>%
                    filter(continent!="Oceania") %>%
                    droplevels()
```


This last code chunk from this task shows in multiple ways that Oceania has been dropped, as have associated factor levels from both the country and continent columns:

```r
#this shows that now Oceania is not one of the levels in the continent column:
gapminder_drop$continent %>% levels()
```

```
## [1] "Africa"   "Americas" "Asia"     "Europe"
```

```r
#and this code outputting zero rows further confirms that Oceania is no longer in the dataset:
gapminder_drop %>% filter(continent == "Oceania")
```

```
## # A tibble: 0 x 6
## # ... with 6 variables: country <fct>, continent <fct>, year <int>,
## #   lifeExp <dbl>, pop <int>, gdpPercap <dbl>
```

```r
#this shows that there are no more countries in the dataset from the Oceania continent:
gapminder_drop %>%
  group_by(continent) %>%
  summarize(n_country = unique(country) %>% length())
```

```
## # A tibble: 4 x 2
##   continent n_country
##   <fct>         <int>
## 1 Africa           52
## 2 Americas         25
## 3 Asia             33
## 4 Europe           30
```

```r
#and this code outputting zero rows further confirms that Australia and New Zealand are no longer in the dataset:
gapminder_drop %>% filter(country %in% c("Australia", "New Zealand"))
```

```
## # A tibble: 0 x 6
## # ... with 6 variables: country <fct>, continent <fct>, year <int>,
## #   lifeExp <dbl>, pop <int>, gdpPercap <dbl>
```


_Reorder the levels of country or continent._ Use the forcats package to change the order of the factor levels, based on summarized information of one of the quantitative variables. Consider experimenting with a summary statistic beyond the most basic choice of the mean/median. Use the forcats package in the tidyverse for this, rather than the baseR function as.factor.






## Exercise 3: File input/output (I/O)


## Exercise 4: Visualization design


## Exercise 5: Writing figures to file


## Exercise 6: But I want to do more! (optional)
